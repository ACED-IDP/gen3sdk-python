language: python
python:
- 2.7
- 3.6
env:
- REPOSITORY="uc-cdis/gen3sdk-python" PR_NUMBER="$TRAVIS_PULL_REQUEST"
install:
- pip install -r requirements.txt
- pip install -r test-requirements.txt
- if [[ $TRAVIS_PYTHON_VERSION == 3.6 ]]; then pip install -e git+https://git@github.com/uc-cdis/wool.git#egg=wool;
  fi
- mv $VIRTUAL_ENV/src/indexclient/indexclient gen3/.
script:
- sed -i.bak "s/0.1.0/$(git describe --tags --abbrev=0 --match=[0-9]*)/g" setup.py
- python setup.py install
- py.test -vv tests
after_script:
- if [[ $TRAVIS_PYTHON_VERSION == 3.6 ]]; then wool; fi
deploy:
  provider: pypi
  user: uccdistravis
  password:
    secure: TX29su3ZCxtmRWpJt2sfWwiRQXt62iterNOuQIekc4oekj1FkYUdiFqPfN84YmRw7/GcgNsKzsaexK6R6So2mJuEYx02NCQiyqW4hq+LUcoSxhD34a5/AODCQxrzOOhZbW2bgD/CNqSAtsumeIq3kXVONLtCrz0y9J3rMfZnq7ggXAV+XOKOdD3cEirvDprdtHGuQAQ6+9qVQexCTXQ+Q+1wwV84O04NRnSFOI64o7FevJGiylhz9b/LEahRwOWea6250nEBkLEhffdyLuAcQaBgT9u6YYVmXhWpfrWt6U7MFM+EPdUtx89+RIfRlHN93LiQcUoL+kalM9JsSnNfFC1AhuVw4q/7zShCoqfB2StmpT8UdA8RfMXLSIjTkMHIdxAagoudZwLwOO61WlW5jE3Frwog6GPcV4jNQEg5xvxBkS3WD6lEK0aj3jpIDLSNKnj2KOK88IUlHqbrNE4eTT/+rSR2BHBXdcJzo/CCaCZyOR9Ah/vAT1ckk3eAyTE319T+D3k87dK0jyIukSY0Wylu4yiiAU+leUFdUZ45JKMYvGlQqvhPji+jpRqYwjqMsFiZuQKd0rDGBgUouXhgW/KZYNsJur5h6PL2SNGukKssCF8cNl1bTphiT8pMlz3xvOCTTyvYrDwaGWjBR6hymOyAUemtMViZHHLjA3INQY4=
  on:
    tags: true
    branch: master
    python: '3.6'
